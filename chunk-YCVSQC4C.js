import{$a as R,Aa as P,Ba as l,Ca as f,Da as _,Ea as M,Fa as g,Ga as S,Ha as $,Ia as C,J as q,Ja as O,Ka as z,La as j,Ma as B,Na as p,Oa as d,Za as k,_a as A,a as x,ab as T,b as y,ga as u,i as v,ka as w,oa as F,xa as b,ya as h,za as I}from"./chunk-UT4U3OMG.js";var m=class o{productColumns=new v([]);productColumns$=this.productColumns.asObservable();productRows=new v([]);productRows$=this.productRows.asObservable();matrix=new v(this.initMatrix());matrix$=this.matrix.asObservable();initMatrix(){let i=this.initNumbersArrays(),t=this.initMaskArrays(),a=i.map((s,e)=>s.map((r,n)=>y(x({},r),{isUsed:t[e][n]})));return console.log(a),this.calculateProducts(a),a}initNumbersArrays(){return Array.from({length:5},()=>Array.from({length:5},()=>({value:Math.floor(Math.random()*8)+2,isUsed:!1,isSelected:!1})))}initMaskArrays(){let t=Array.from({length:5},()=>Array(5).fill(!1)),a=e=>t[e].filter(r=>r).length,s=e=>t.map(r=>r[e]).filter(r=>r).length;for(let e=0;e<5;e++){let r=Math.floor(Math.random()*3)+2,n=0;for(;n<r;){let c=Math.floor(Math.random()*5);!t[e][c]&&s(c)<4&&(t[e][c]=!0,n++)}}for(let e=0;e<5;e++){let r=s(e);if(r<2){let n=0;for(let c=0;c<5&&n<2-r;c++)!t[c][e]&&a(c)<4&&(t[c][e]=!0,n++)}}return t}calculateProducts(i){let a=[],s=[];for(let e=0;e<5;e++){let r=1;for(let n=0;n<5;n++)i[e][n].isUsed&&(r*=i[e][n].value);a.push({product:r,isMatched:!1})}for(let e=0;e<5;e++){let r=1;for(let n=0;n<5;n++)i[n][e].isUsed&&(r*=i[n][e].value);s.push({product:r,isMatched:!1})}this.productRows.next(a),this.productColumns.next(s)}static \u0275fac=function(t){return new(t||o)};static \u0275prov=q({token:o,factory:o.\u0275fac})};var E=o=>({used:o});function L(o,i){if(o&1&&(l(0,"div",3),g(1),f()),o&2){let t=i.$implicit;P("ngClass",B(2,E,t.isUsed)),u(),$(" ",t.value," ")}}function G(o,i){if(o&1&&(l(0,"div",1),h(1,L,2,4,"div",3,b),l(3,"div",4),g(4),p(5,"number"),f()()),o&2){let t=i.$implicit,a=i.$index;M();let s=z(2);u(),I(t),u(3),S(d(5,1,s==null||s[a]==null?null:s[a].product))}}function H(o,i){if(o&1&&(l(0,"div",2),g(1),p(2,"number"),f()),o&2){let t=i.$implicit;u(),S(d(2,1,t.product))}}var D=class o{constructor(i){this.fiveInSquareService=i}matrix$;productColumns$;productRows$;ngOnInit(){this.matrix$=this.fiveInSquareService.matrix$,this.productColumns$=this.fiveInSquareService.productColumns$,this.productRows$=this.fiveInSquareService.productRows$}static \u0275fac=function(t){return new(t||o)(w(m))};static \u0275cmp=F({type:o,selectors:[["app-five-in-square"]],features:[j([m])],decls:12,vars:7,consts:[[1,"square"],[1,"square-row"],[1,"square-item","col-product"],[1,"square-item",3,"ngClass"],[1,"square-item","row-product"]],template:function(t,a){if(t&1&&(C(0),p(1,"async"),C(2),p(3,"async"),l(4,"div",0),h(5,G,6,3,"div",1,b),l(7,"div",1),h(8,H,3,3,"div",2,b),p(10,"async"),_(11,"div",2),f()()),t&2){let s=d(1,0,a.matrix$);u(2),O(d(3,2,a.productRows$)),u(3),I(s),u(3),I(d(10,5,a.productColumns$))}},dependencies:[T,k,A,R],styles:["[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%;width:100%;font-family:Alan Sans,sans-serif;font-optical-sizing:auto;font-weight:500;font-style:normal;font-size:x-large}.square[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;border-left:1px solid #fff;border-top:1px solid #fff}.square-row[_ngcontent-%COMP%]{display:flex;flex-direction:row}.square-item[_ngcontent-%COMP%]{width:60px;height:60px;display:flex;justify-content:center;align-items:center;border-right:3px solid #fff;border-bottom:3px solid #fff;background-color:#7fffd4}.col-product[_ngcontent-%COMP%]{background-color:unset;border-right:3px solid #fff;border-bottom:unset;font-size:large}.row-product[_ngcontent-%COMP%]{background-color:unset;border-right:unset;border-bottom:3px solid #fff;border-top:unset;font-size:large}.used[_ngcontent-%COMP%]{background-color:orange}"]})};export{D as FiveInSquareComponent};
